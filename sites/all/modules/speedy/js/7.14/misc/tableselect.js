(function(a){Drupal.behaviors.tableSelect={attach:function(b,c){a("th.select-all",b).closest("table").once("table-select",Drupal.tableSelect)}},Drupal.tableSelect=function(){if(a("td input:checkbox",this).length==0)return;var b=this,c,d,e={selectAll:Drupal.t("Select all rows in this table"),selectNone:Drupal.t("Deselect all rows in this table")},f=function(c){a("th.select-all input:checkbox",b).each(function(){a(this).attr("title",c?e.selectNone:e.selectAll),this.checked=c})};a("th.select-all",b).prepend(a('<input type="checkbox" class="form-checkbox" />').attr("title",e.selectAll)).click(function(b){a(b.target).is("input:checkbox")&&(c.each(function(){this.checked=b.target.checked,a(this).closest("tr").toggleClass("selected",this.checked)}),f(b.target.checked))}),c=a("td input:checkbox:enabled",b).click(function(b){a(this).closest("tr").toggleClass("selected",this.checked),b.shiftKey&&d&&d!=b.target&&Drupal.tableSelectRange(a(b.target).closest("tr")[0],a(d).closest("tr")[0],b.target.checked),f(c.length==a(c).filter(":checked").length),d=b.target})},Drupal.tableSelectRange=function(b,c,d){var e=b.rowIndex>c.rowIndex?"previousSibling":"nextSibling";for(var f=b[e];f;f=f[e]){if(f.nodeType!=1)continue;a(f).toggleClass("selected",d),a("input:checkbox",f).each(function(){this.checked=d});if(c.nodeType){if(f==c)break}else if(a.filter(c,[f]).r.length)break}}})(jQuery);