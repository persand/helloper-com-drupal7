(function(a){Drupal.behaviors.verticalTabs={attach:function(b){a(".vertical-tabs-panes",b).once("vertical-tabs",function(){var b=a(":hidden.vertical-tabs-active-tab",this).val(),c,d=a("> fieldset",this);if(d.length==0)return;var e=a('<ul class="vertical-tabs-list"></ul>');a(this).wrap('<div class="vertical-tabs clearfix"></div>').before(e),d.each(function(){var d=new Drupal.verticalTab({title:a("> legend",this).text(),fieldset:a(this)});e.append(d.item),a(this).removeClass("collapsible collapsed").addClass("vertical-tabs-pane").data("verticalTab",d),this.id==b&&(c=a(this))}),a("> li:first",e).addClass("first"),a("> li:last",e).addClass("last"),c||(window.location.hash&&a(window.location.hash,this).length?c=a(window.location.hash,this).closest(".vertical-tabs-pane"):c=a("> .vertical-tabs-pane:first",this)),c.length&&c.data("verticalTab").focus()})}},Drupal.verticalTab=function(b){var c=this;a.extend(this,b,Drupal.theme("verticalTab",b)),this.link.click(function(){return c.focus(),!1}),this.link.keydown(function(b){if(b.keyCode==13)return c.focus(),a("fieldset.vertical-tabs-pane :input:visible:enabled:first").focus(),!1}),this.fieldset.keydown(function(b){if(b.keyCode==13&&b.target.nodeName!="TEXTAREA")return a(".vertical-tab-button.selected a").focus(),!1}),this.fieldset.bind("summaryUpdated",function(){c.updateSummary()}).trigger("summaryUpdated")},Drupal.verticalTab.prototype={focus:function(){this.fieldset.siblings("fieldset.vertical-tabs-pane").each(function(){var b=a(this).data("verticalTab");b.fieldset.hide(),b.item.removeClass("selected")}).end().show().siblings(":hidden.vertical-tabs-active-tab").val(this.fieldset.attr("id")),this.item.addClass("selected"),a("#active-vertical-tab").remove(),this.link.append('<span id="active-vertical-tab" class="element-invisible">'+Drupal.t("(active tab)")+"</span>")},updateSummary:function(){this.summary.html(this.fieldset.drupalGetSummary())},tabShow:function(){return this.item.show(),this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first"),this.fieldset.removeClass("vertical-tab-hidden").show(),this.focus(),this},tabHide:function(){this.item.hide(),this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first"),this.fieldset.addClass("vertical-tab-hidden").hide();var a=this.fieldset.siblings(".vertical-tabs-pane:not(.vertical-tab-hidden):first");return a.length&&a.data("verticalTab").focus(),this}},Drupal.theme.prototype.verticalTab=function(b){var c={};return c.item=a('<li class="vertical-tab-button" tabindex="-1"></li>').append(c.link=a('<a href="#"></a>').append(c.title=a("<strong></strong>").text(b.title)).append(c.summary=a('<span class="summary"></span>'))),c}})(jQuery);