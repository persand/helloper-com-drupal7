(function($){Drupal.behaviors.overlayChild={attach:function(a,b){if(this.processed)return;this.processed=!0;if(!parent.Drupal||!parent.Drupal.overlay)window.location=window.location.href.replace(/([?&]?)render=overlay&?/g,"$1").replace(/\?$/,"");var b=b.overlayChild||{};b.refreshPage&&(parent.Drupal.overlay.refreshPage=!0);if(b.closeOverlay){parent.Drupal.overlay.bindChild(window,!0),setTimeout(function(){typeof b.redirect=="string"?parent.Drupal.overlay.redirect(b.redirect):parent.Drupal.overlay.close()},1);return}b.refreshRegions&&parent.Drupal.overlay.refreshRegions(b.refreshRegions),parent.Drupal.overlay.bindChild(window),window.scrollTo(window.scrollX,window.scrollY),Drupal.overlayChild.attachBehaviors(a,b),$("#overlay-disable-message",a).focusin(function(){$(this).addClass("overlay-disable-message-focused"),$("a.element-focusable",this).removeClass("element-invisible")}).focusout(function(){$(this).removeClass("overlay-disable-message-focused"),$("a.element-focusable",this).addClass("element-invisible")})}},Drupal.overlayChild=Drupal.overlayChild||{behaviors:{}},Drupal.overlayChild.prototype={},Drupal.overlayChild.attachBehaviors=function(a,b){$.each(this.behaviors,function(){this(a,b)})},Drupal.overlayChild.behaviors.addClickHandler=function(a,b){$(document).bind("click.drupal-overlay mouseup.drupal-overlay",$.proxy(parent.Drupal.overlay,"eventhandlerOverrideLink"))},Drupal.overlayChild.behaviors.parseForms=function(a,b){$("form",a).once("overlay",function(){var a=$(this).attr("action");a==undefined||a.indexOf("http")!=0&&a.indexOf("https")!=0?(a+=(a.indexOf("?")>-1?"&":"?")+"render=overlay",$(this).attr("action",a)):$(this).attr("target","_new")})},Drupal.overlayChild.behaviors.loading=function(a,b){var c,d=Drupal.t("Loading"),e="";$(document).bind("drupalOverlayBeforeLoad.drupal-overlay.drupal-overlay-child-loading",function(){c=$("#overlay-title").text(d);var a=setInterval(function(){e=e.length>10?"":e+".",c.text(d+e)},500)})},Drupal.overlayChild.behaviors.tabs=function(a,b){var c=$("#overlay-tabs > li > a");$("#overlay-tabs > li > a").bind("click.drupal-overlay",function(){var a=Drupal.t("(active tab)");c.parent().siblings().removeClass("active").find("element-invisible:contains("+a+")").appendTo(this),$(this).parent().addClass("active")})},Drupal.overlayChild.behaviors.shortcutAddLink=function(a,b){$("#overlay-titlebar").find(".add-or-remove-shortcuts").remove();var c=$(".add-or-remove-shortcuts");c.length&&c.insertAfter("#overlay-title"),$(document).bind("drupalOverlayBeforeLoad.drupal-overlay.drupal-overlay-child-loading",function(){$("#overlay-titlebar").find(".add-or-remove-shortcuts").remove()})},Drupal.overlayChild.behaviors.alterTableHeaderOffset=function(a,b){Drupal.settings.tableHeaderOffset&&(Drupal.overlayChild.prevTableHeaderOffset=Drupal.settings.tableHeaderOffset),Drupal.settings.tableHeaderOffset="Drupal.overlayChild.tableHeaderOffset"},Drupal.overlayChild.tableHeaderOffset=function(){var topOffset=Drupal.overlayChild.prevTableHeaderOffset?eval(Drupal.overlayChild.prevTableHeaderOffset+"()"):0;return topOffset+parseInt($(document.body).css("marginTop"))}})(jQuery);